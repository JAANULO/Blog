<!DOCTYPE html>
<html lang="pl">
<head>
    <link rel="icon" href="media/favicon.png" type="image/png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Janusz Andrzejewski</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">

    <style>
        /* Definicja kolorów i czcionek */
        :root {
            --bg-color: #0b132b;
            --primary-color: #1c2541;
            --highlight-color: #6495ED;
            --text-color: #f0f0f0;
        }

        html { scroll-behavior: smooth; }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Open Sans', sans-serif;
            margin: 0;
            line-height: 1.6;
        }

        /* --- NAWIGACJA --- */
        nav {
            position: sticky;
            top: 0;
            width: 100%;
            background-color: var(--bg-color);
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            padding: 15px 0;
        }

        .nav-links {
            display: flex;
            justify-content: center;
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .nav-links a {
            color: var(--text-color);
            text-decoration: none;
            padding: 15px 40px;
            font-family: 'Montserrat', sans-serif;
            font-size: 1.1rem;
            border-radius: 5px;
            transition: background-color 0.3s, color 0.3s;
        }

        .nav-links a:hover {
            background-color: var(--highlight-color);
            color: white;
        }

        /* --- HERO --- */
        .hero {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px 20px;
        }

        #moje-zdjecie {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid var(--highlight-color);
            margin-bottom: 20px;
        }

        .hero h1 {
            font-family: 'Montserrat', sans-serif;
            font-size: 2.5rem;
            margin: 20px 0 10px 0;
            color: white;
        }

        a { color: var(--highlight-color); font-weight: 600; }

        /* --- GŁÓWNA TREŚĆ --- */
        .container {
            max-width: 1100px;
            margin: 0 auto 40px;
            padding: 0 20px;
        }

        section { padding-top: 60px; }
        main > section:first-of-type { padding-top: 20px; }

        h2 {
            font-family: 'Montserrat', sans-serif;
            color: var(--highlight-color);
            border-bottom: 2px solid var(--highlight-color);
            padding-bottom: 10px;
            margin-top: 20px;
        }

        /* --- GALERIA --- */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }

        .gallery-item {
            background-color: var(--primary-color);
            border-radius: 8px;
            overflow: hidden;
            text-align: center;
            padding-bottom: 15px;
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
        }

        .gallery-item:hover {
            transform: translateY(-8px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4);
        }

        .gallery-item img {
            width: 100%;
            height: 250px;
            object-fit: cover;
            transition: transform 0.3s ease-in-out;
        }

        .gallery-item:hover img { transform: scale(1.05); }
        .gallery-item .title { font-weight: bold; font-size: 1.1em; margin-top: 15px; }
        .gallery-item .date { font-size: 0.9em; color: #aaa; }

        /* --- SERIALE --- */
        .series-container {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 20px;
        }
        @media (max-width: 1200px) { .series-container { grid-template-columns: repeat(4, 1fr); } }
        @media (max-width: 900px) { .series-container { grid-template-columns: repeat(3, 1fr); } }
        @media (max-width: 600px) { .series-container { grid-template-columns: repeat(2, 1fr); } }
        @media (max-width: 400px) { .series-container { grid-template-columns: repeat(1, 1fr); } }

        .series-item {
            flex: 0 1 200px;
            background-color: var(--primary-color);
            border-radius: 8px;
            overflow: hidden;
            text-align: center;
            padding-bottom: 15px;
            transition: transform 0.3s ease-in-out, border 0.3s, box-shadow 0.3s;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            border: 3px solid transparent;
        }

        .series-item.favorite {
            border-color: #ff1744 !important;
            box-shadow: 0 0 15px rgba(255, 23, 68, 0.6) !important;
        }

        .series-item:hover { transform: translateY(-8px); }

        .series-item img {
            width: 100%;
            height: auto;
            max-height: 175px;
            object-fit: contain;
            transition: transform 0.3s;
        }
        .series-item:hover img { transform: scale(1.05); }

        .seasons-container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 5px;
            margin-top: 10px;
            padding: 0 5px;
        }

        .season-icon {
            display: block;
            color: white;
            font-size: 0.8rem;
            font-weight: bold;
            padding: 3px 8px;
            border-radius: 4px;
            background-color: var(--highlight-color);
        }

        .season-icon.watched { background-color: #4CAF50; }
        .season-icon.watching { background-color: #FFC107; }
        .season-icon.not-watched { background-color: #757575; }

        /* --- UŻYTECZNE KLASY --- */
        .fade-in-section {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .fade-in-section.is-visible { opacity: 1; transform: translateY(0); }

        .linux-joke { cursor: pointer; }
        .linux-joke .hover-text { display: none; color: var(--highlight-color); font-weight: bold; }
        .linux-joke:hover .original-text { display: none; }
        .linux-joke:hover .hover-text { display: inline; }

        /* --- KAFELEK INFO --- */
        .hover-image-container { position: fixed; top: 20px; right: 20px; z-index: 1001; }
        .hover-tile {
            width: 50px; height: 50px; background-color: var(--highlight-color);
            border-radius: 5px; cursor: pointer; display: flex;
            align-items: center; justify-content: center;
            color: var(--text-color); font-weight: bold; font-size: 0.9rem;
            transition: 0.3s;
        }
        .hover-image-container .hidden-image {
            display: none; position: absolute; top: 0; right: 60px;
            width: 300px; border: 3px solid var(--highlight-color);
            border-radius: 8px; box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }
        .hover-image-container:hover .hidden-image { display: block; }
        .hover-image-container:hover .hover-tile { transform: scale(1.1); }

        @media (max-width: 600px) {
            .nav-links { flex-direction: column; align-items: center; }
            nav { padding: 0; }
        }

        /* --- ROZWIJANE SEKCJE --- */
        .projekt-toggle {
            cursor: pointer; background-color: var(--primary-color);
            color: var(--text-color); padding: 15px 20px; margin-top: 20px;
            border-radius: 8px; display: flex; align-items: center;
        }
        .projekt-toggle::after { content: '+'; font-size: 1.5em; margin-left: auto; transition: 0.3s; }
        .projekt-toggle.active::after { content: '-'; transform: rotate(180deg); }
        .projekt-content {
            background-color: var(--primary-color); border-radius: 8px;
            padding: 0 20px; max-height: 0; overflow: hidden;
            transition: max-height 0.4s, padding 0.4s;
        }
        .projekt-content.show { max-height: 4000px; padding: 20px; }
        iframe[src*="letterboxd-embed.timcieplowski.com"] p:last-child { display: none; }
    </style>
</head>
<body>

    <div class="hover-image-container">
        <div class="hover-tile">INFO</div>
        <img src="media/kochac_pwr.png" alt="Ukryty obrazek" class="hidden-image">
    </div>

    <nav>
        <ul class="nav-links">
            <li><a href="#o-mnie">O mnie</a></li>
            <li><a href="#osiagniecia">Osiągnięcia</a></li>
            <li><a href="#kino">Kino</a></li>
            <li><a href="#galeria">Galeria</a></li>
            <li><a href="#kontakt">Kontakt</a></li>
        </ul>
    </nav>
    <header class="hero fade-in-section">
        <img id="moje-zdjecie" src="media/farma.jpeg" alt="Moje zdjęcie">
        <h1>Janusz Andrzejewski</h1>
    </header>

    <main class="container">

        <section id="o-mnie" class="fade-in-section">
            <h2>O mnie</h2>
            <p id="opis-o-mnie">Ładowanie opisu...</p>
            <p class="linux-joke">
                <span class="original-text"><strong>-</strong></span>
                <span class="hover-text">tu nic nie ma</span>
            </p>
        </section>

        <section id="osiagniecia" class="fade-in-section">
            <h2>Osiągnięcia</h2>
            <ul>
                <li>Wolontariusz Juwelaliów PWR 2025</li>
                <li>Kostka Rubika 3x3 <1min </li>
                <li>max 1299 elo w szachach szybkich na chesscom</li>
            </ul>
        </section>

        <section id="kino" class="fade-in-section">
            <h2>Kino</h2>
            <p><strong>Początki: </strong>Na początku pandemii kiedy większość czasu spędzałem w domu zacząłem oglądać różne rzeczy, najpierw obejrzałem chronologicznie uniwersum Marvela, potem trylogię "Mrocznego Rycerza". A gdy skończyłem Breaking Bad (2022/2023) oraz Better Call Saul (na ten moment moje ulubione seriale) to tak naprawdę polubiłem kino. </p>
            <p><strong>Obecnie: </strong>Staram się zmniejszać moją listę "do obejrzenia". Czasami też czytam ciekawostki z planów, zagadnienia techniczne i takie tam.</p>

            <h3 class="projekt-toggle">Recenzje ostatnich filmów:</h3>
                <div class="projekt-content">
                    <p>A gdy coś obejrze to staram się to zrecenzować:</p>
                    <div id="letterboxd-embed-wrapper-tc">Ładowanie recenzji...</div>
                </div>

            <h3 class="projekt-toggle">Seriale</h3>
                <div class="projekt-content">
                    <p>Seriale jakie oglądam/obejrzałem:</p>
                    <div class="series-container" id="lista-seriali">
                        Ładowanie seriali...
                    </div>
                </div>

            <h3 class="projekt-toggle">Miniseriale</h3>
                <div class="projekt-content">
                    <p>Miniseriale jakie oglądam/obejrzałem:</p>
                    <div class="series-container" id="lista-miniseriali">
                        Ładowanie miniseriali...
                    </div>
                </div>
        </section>

        <section id="galeria" class="fade-in-section">
            <h2>Galeria</h2>
            <div class="gallery-grid">
                <div class="gallery-item fade-in-section">
                    <img src="media/hala2.jpg" alt="Zdjęcie">
                    <p class="title">Hala Stulecia</p>
                    <p class="date">22 listopad 2025</p>
                </div>
                <div class="gallery-item fade-in-section">
                    <img src="media/muchobór.jpg" alt="Zdjęcie">
                    <p class="title">Wrocław Muchobór</p>
                    <p class="date">17 październik 2025</p>
                </div>
                 <div class="gallery-item fade-in-section">
                    <img src="media/hedgehog.jpg" alt="Zdjęcie">
                    <p class="title">Protected hedgehog</p>
                    <p class="date">26 czerwiec 2025</p>
                </div>
                <div class="gallery-item fade-in-section">
                    <img src="media/Juwe.jpg" alt="Juwenalia">
                    <p class="title">Juwenalia PWR</p>
                    <p class="date">19 maja 2025</p>
                </div>
                <div class="gallery-item fade-in-section">
                    <img src="media/PIWO.jpg" alt="piwo">
                    <p class="title">P.I.W.O.</p>
                    <p class="date">15 maja 2025</p>
                </div>
                <div class="gallery-item fade-in-section">
                    <img src="media/rajd.jpg" alt="rajd">
                    <p class="title">Rajd</p>
                    <p class="date">27 kwietnia 2025</p>
                </div>
                <div class="gallery-item fade-in-section">
                    <img src="media/w3.png" alt="Zrzut">
                    <p class="title">Wiedźmin 3</p>
                    <p class="date">12 czerwiec 2021</p>
                </div>
                <div class="gallery-item fade-in-section">
                    <img src="media/park.jpg" alt="Zdjęcie">
                    <p class="title">Beczka</p>
                    <p class="date">29 czerwiec 2021</p>
                </div>
                <div class="gallery-item fade-in-section">
                    <img src="media/Szrenica.jpg" alt="Zdjęcie">
                    <p class="title">Szrenica</p>
                    <p class="date">16 grudzień 2017</p>
                </div>
            </div>
        </section>

        <section id="kontakt" class="fade-in-section">
            <h2>Kontakt</h2>
            <p>Możesz się ze mną skontaktować przez email: <strong>284052@student.pwr.edu.pl</strong></p>
        </section>

    </main>

    <script>
        document.addEventListener("DOMContentLoaded", function() {

            // Dynamiczny URL API - działa zarówno na localhost jak i produkcji
            const API_URL = window.location.origin + '/api';

            // 1. Animacje pojawiania się (Fade in)
            const sections = document.querySelectorAll('.fade-in-section');
            const observer = new IntersectionObserver((entries, obs) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                        obs.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });
            sections.forEach(s => observer.observe(s));

            // 2. Obsługa rozwijanych sekcji (Toggles)
            document.querySelectorAll('.projekt-toggle').forEach(toggle => {
                toggle.addEventListener('click', () => {
                    const content = toggle.nextElementSibling;

                    // Zwiń inne otwarte sekcje
                    document.querySelectorAll('.projekt-content.show').forEach(item => {
                        if (item !== content) {
                            item.classList.remove('show');
                            item.previousElementSibling.classList.remove('active');
                        }
                    });

                    toggle.classList.toggle('active');
                    content.classList.toggle('show');
                });
            });

            // 3. Widżet Letterboxd
            fetch('https://lb-embed-content.bokonon.dev?username=janulo&limit=3'+ new Date().getTime())
                .then(r => r.text())
                .then(data => {
                    document.getElementById('letterboxd-embed-wrapper-tc').innerHTML = data;
                });

            // 4. --- POBIERANIE DANYCH Z BACKENDU (O mnie + Seriale + Daty) ---
            fetch(API_URL + "/data")
                .then(res => res.json())
                .then(data => {
                    // A. Wstaw tekst "O mnie"
                    if(data.o_mnie) {
                        document.getElementById("opis-o-mnie").innerHTML = data.o_mnie;
                    }

                    // B. Funkcja do generowania kafelków z serialami
                    function generujKafelki(lista, containerId) {
                        const container = document.getElementById(containerId);
                        container.innerHTML = ""; // Czyścimy napis "Ładowanie..."

                        lista.forEach(serial => {
                            // Generowanie kółeczek z sezonami
                            let sezonyHTML = "";
                            serial.sezony.forEach(s => {
                                sezonyHTML += `<span class="season-icon ${s.status}">S${s.nr}</span>`;
                            });

                            // Formatowanie daty (jeśli istnieje w bazie)
                            let dataHTML = "";
                            if (serial.data) {
                                const dataObj = new Date(serial.data);
                                const dataTekst = dataObj.toLocaleDateString('pl-PL', {
                                    day: 'numeric',
                                    month: 'long',
                                    year: 'numeric'
                                });
                                dataHTML = `<p style="font-size: 0.85rem; color: #888; margin: 5px 0 0 0;">${dataTekst}</p>`;
                            }

                            // Sprawdzaj czy serial jest ulubiony
                            const favoriteClass = serial.favorite ? 'favorite' : '';

                            // Wstawianie kafelka do HTML
                            container.innerHTML += `
                                <div class="series-item fade-in-section is-visible ${favoriteClass}">
                                    <img src="${serial.img}" alt="${serial.tytul}">
                                    <p class="title">${serial.tytul}</p>
                                    ${dataHTML}
                                    <div class="seasons-container">
                                        ${sezonyHTML}
                                    </div>
                                </div>
                            `;
                        });
                    }

                    // C. Wywołanie funkcji dla Seriali i Miniseriali
                    if(data.seriale) generujKafelki(data.seriale, "lista-seriali");
                    if(data.miniseriale) generujKafelki(data.miniseriale, "lista-miniseriali");
                })
                .catch(err => console.error("Błąd połączenia z backendem:", err));
        });
    </script>
</body>
</html>